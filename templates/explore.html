<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A&H Social - Explore</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header class="top-nav">
  <div class="logo">A&H</div>
  <div class="page-title">Explore</div>
  <div class="theme-toggle" id="themeToggle">ğŸŒ™</div>
</header>

<main class="content explore-grid">
  {% for post in posts %}
    <div class="post">
      {% if post.filename.endswith('.mp4') or post.filename.endswith('.webm') or post.filename.endswith('.mov') or post.filename.endswith('.avi') %}
        <video controls width="100%" style="border-radius:10px;">
          <source src="{{ url_for('static', filename='uploads/' + post.filename) }}" type="video/mp4">
          Your browser does not support video.
        </video>
      {% else %}
        <img src="{{ url_for('static', filename='uploads/' + post.filename) }}" alt="{{ post.caption }}" style="width:100%; border-radius:10px;">
      {% endif %}

      <div class="post-info">
        <p><strong>@{{ post.user }}</strong></p>
        <p>{{ post.caption }}</p>
      </div>

      <div class="post-actions">
        <form action="{{ url_for('like_post', filename=post.filename) }}" method="POST" style="display:inline;">
          <button type="submit">â¤ï¸ {{ post.likes|length if post.likes else 0 }} Likes</button>
        </form>

        <form action="{{ url_for('comment_post', filename=post.filename) }}" method="POST" style="display:inline;">
          <input type="text" name="comment" placeholder="Add comment..." required>
          <button type="submit">ğŸ’¬ Comment</button>
        </form>
      </div>

      {% if post.comments %}
      <div class="comments">
        {% for c in post.comments %}
          <p><strong>@{{ c.user }}:</strong> {{ c.text }}</p>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  {% endfor %}
</main>

<nav class="bottom-nav">
  <a href="{{ url_for('index') }}">ğŸ <span>Home</span></a>
  <a href="{{ url_for('explore') }}" class="active">ğŸ”<span>Explore</span></a>
  <a href="{{ url_for('upload') }}" class="upload-btn">â•</a>
  <a href="{{ url_for('feedback') }}">ğŸ’¬<span>Feedback</span></a>
  <a href="{{ url_for('profile') }}">ğŸ‘¤<span>Profile</span></a>
</nav>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
